{"timestamp": "2025-09-24T03:35:45.944511", "step": 1, "action": "initialization", "details": {"repo_path": "astropy/astropy", "base_commit": "7269fa3e33e8d02485a647da91a5a2a60a06af61", "problem_statement": "ascii.qdp Table format assumes QDP commands are upper case\n### Description\n\nascii.qdp assumes that commands in a QDP file are upper case, for example, for errors they must be \"READ SERR 1 2\" whereas QDP itself is not case sensitive and case use \"read serr 1 2\". \r\n\r\nAs many QDP files are created by hand, the expectation that all commands be all-caps should be removed.\n\n### Expected behavior\n\nThe following qdp file should read into a `Table` with errors, rather than crashing.\r\n```\r\nread serr 1 2 \r\n1 0.5 1 0.5\r\n```\n\n### How to Reproduce\n\nCreate a QDP file:\r\n```\r\n> cat > test.qdp\r\nread serr 1 2 \r\n1 0.5 1 0.5\r\n<EOF>\r\n\r\n > python\r\nPython 3.10.9 (main, Dec  7 2022, 02:03:23) [Clang 13.0.0 (clang-1300.0.29.30)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from astropy.table import Table\r\n>>> Table.read('test.qdp',format='ascii.qdp')\r\nWARNING: table_id not specified. Reading the first available table [astropy.io.ascii.qdp]\r\nTraceback (most recent call last):\r\n...\r\n    raise ValueError(f'Unrecognized QDP line: {line}')\r\nValueError: Unrecognized QDP line: read serr 1 2\r\n```\r\n\r\nRunning \"qdp test.qdp\" works just fine.\r\n\n\n### Versions\n\nPython 3.10.9 (main, Dec  7 2022, 02:03:23) [Clang 13.0.0 (clang-1300.0.29.30)]\r\nastropy 5.1\r\nNumpy 1.24.1\r\npyerfa 2.0.0.1\r\nScipy 1.10.0\r\nMatplotlib 3.6.3\r\n\n", "version": "5.1", "timeout": 2200, "test_file_path": null, "test_case_name": null}, "performance": {"duration_seconds": 2.384185791015625e-07, "memory_usage_mb": 178.75, "step_type": "general"}, "metadata": {"instance_id": "astropy__astropy-14365", "total_steps": 1, "session_id": "session_1758677745"}}
{"timestamp": "2025-09-24T03:35:53.696183", "step": 2, "action": "repository_setup", "details": {"original_path": "astropy/astropy", "final_path": "/tmp/astropy__astropy_astropy__astropy-14365", "base_commit": "7269fa3e33e8d02485a647da91a5a2a60a06af61"}, "performance": {"duration_seconds": 2.384185791015625e-07, "memory_usage_mb": 178.75, "step_type": "general"}, "metadata": {"instance_id": "astropy__astropy-14365", "total_steps": 2, "session_id": "session_1758677753"}}
{"timestamp": "2025-09-24T03:35:53.696475", "step": 3, "action": "agent_preparation", "details": {"input_dict": {"instance_id": "astropy__astropy-14365", "problem_statement": "ascii.qdp Table format assumes QDP commands are upper case\n### Description\n\nascii.qdp assumes that commands in a QDP file are upper case, for example, for errors they must be \"READ SERR 1 2\" whereas QDP itself is not case sensitive and case use \"read serr 1 2\". \r\n\r\nAs many QDP files are created by hand, the expectation that all commands be all-caps should be removed.\n\n### Expected behavior\n\nThe following qdp file should read into a `Table` with errors, rather than crashing.\r\n```\r\nread serr 1 2 \r\n1 0.5 1 0.5\r\n```\n\n### How to Reproduce\n\nCreate a QDP file:\r\n```\r\n> cat > test.qdp\r\nread serr 1 2 \r\n1 0.5 1 0.5\r\n<EOF>\r\n\r\n > python\r\nPython 3.10.9 (main, Dec  7 2022, 02:03:23) [Clang 13.0.0 (clang-1300.0.29.30)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from astropy.table import Table\r\n>>> Table.read('test.qdp',format='ascii.qdp')\r\nWARNING: table_id not specified. Reading the first available table [astropy.io.ascii.qdp]\r\nTraceback (most recent call last):\r\n...\r\n    raise ValueError(f'Unrecognized QDP line: {line}')\r\nValueError: Unrecognized QDP line: read serr 1 2\r\n```\r\n\r\nRunning \"qdp test.qdp\" works just fine.\r\n\n\n### Versions\n\nPython 3.10.9 (main, Dec  7 2022, 02:03:23) [Clang 13.0.0 (clang-1300.0.29.30)]\r\nastropy 5.1\r\nNumpy 1.24.1\r\npyerfa 2.0.0.1\r\nScipy 1.10.0\r\nMatplotlib 3.6.3\r\n\n", "repo": "/tmp/astropy__astropy_astropy__astropy-14365", "base_commit": "7269fa3e33e8d02485a647da91a5a2a60a06af61", "test_file_path": null, "test_case_name": null, "timeout": 2200, "traj_dir": "results/trajectories", "temp_dir": "/tmp/swe_bench_temp_astropy__astropy-14365", "log_path": "/tmp/swe_bench_log_astropy__astropy-14365.txt", "pr": null}, "models_available": ["zai-org/GLM-4.5-FP8", "Qwen/Qwen3-Coder-480B-A35B-Instruct-FP8", "moonshotai/Kimi-K2-Instruct", "deepseek-ai/DeepSeek-V3-0324"]}, "performance": {"duration_seconds": 2.384185791015625e-07, "memory_usage_mb": 178.75, "step_type": "general"}, "metadata": {"instance_id": "astropy__astropy-14365", "total_steps": 3, "session_id": "session_1758677753"}}
{"timestamp": "2025-09-24T03:40:46.567037", "step": 4, "action": "agent_execution_success", "details": {"patch_length": 929, "patch_preview": "diff --git a/astropy/io/ascii/qdp.py b/astropy/io/ascii/qdp.py\nindex 83a4f004aa..2db17779e3 100644\n--- a/astropy/io/ascii/qdp.py\n+++ b/astropy/io/ascii/qdp.py\n@@ -34,6 +34,10 @@ def _line_type(line, delimiter=None):\n     --------\n     >>> _line_type(\"READ SERR 3\")\n     'command'\n+    >>> _line_type(\"read serr 3\")\n+    'command'\n+    >>> _line_type(\"Read Terr 3\")\n+    'command'\n     >>> _line_type(\" \\\\n    !some gibberish\")\n     'comment'\n     >>> _line_type(\"   \")\n@@ -68,7 +72,7 @@ def _line_typ"}, "performance": {"duration_seconds": 2.384185791015625e-07, "memory_usage_mb": 178.75, "step_type": "general"}, "metadata": {"instance_id": "astropy__astropy-14365", "total_steps": 4, "session_id": "session_1758678046"}}
{"timestamp": "2025-09-24T03:40:46.567310", "event": "final_result", "success": true, "message": "Success", "final_patch": "diff --git a/astropy/io/ascii/qdp.py b/astropy/io/ascii/qdp.py\nindex 83a4f004aa..2db17779e3 100644\n--- a/astropy/io/ascii/qdp.py\n+++ b/astropy/io/ascii/qdp.py\n@@ -34,6 +34,10 @@ def _line_type(line, delimiter=None):\n     --------\n     >>> _line_type(\"READ SERR 3\")\n     'command'\n+    >>> _line_type(\"read serr 3\")\n+    'command'\n+    >>> _line_type(\"Read Terr 3\")\n+    'command'\n     >>> _line_type(\" \\\\n    !some gibberish\")\n     'comment'\n     >>> _line_type(\"   \")\n@@ -68,7 +72,7 @@ def _line_type(line, delimiter=None):\n     _new_re = rf\"NO({sep}NO)+\"\n     _data_re = rf\"({_decimal_re}|NO|[-+]?nan)({sep}({_decimal_re}|NO|[-+]?nan))*)\"\n     _type_re = rf\"^\\s*((?P<command>{_command_re})|(?P<new>{_new_re})|(?P<data>{_data_re})?\\s*(\\!(?P<comment>.*))?\\s*$\"\n-    _line_type_re = re.compile(_type_re)\n+    _line_type_re = re.compile(_type_re, re.IGNORECASE)\n     line = line.strip()\n     if not line:\n         return \"comment\"\n", "performance_summary": {"total_steps": 4, "avg_step_time": 0.0, "total_llm_interactions": 0, "total_tool_calls": 0, "memory_usage_mb": 178.75}, "metadata": {"instance_id": "astropy__astropy-14365", "session_id": "session_1758678046", "patch_length": 929}}
